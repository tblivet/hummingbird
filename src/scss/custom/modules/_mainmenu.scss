// Desktop Menu
.main-menu {
  display: flex;
  order: -1;

  .menu-desktop {
    height: 100%;
  }

  &__tree {
    align-items: stretch;
    height: 100%;

    > li {
      display: flex;
      align-items: center;

      &.current {
        a {
          color: var(--bs-primary);
        }
      }

      > a {
        padding: 1.5rem 0.75rem;
        color: var(--bs-gray-600);

        &.dropdown-toggle {
          gap: 0.5rem;
        }

        &:hover {
          color: var(--bs-body-color);
          cursor: pointer;
        }

        &:active {
          color: var(--bs-primary);
        }
      }

      &:hover {
        .submenu,
        .menu-container {
          display: block;
        }
      }

      .submenu,
      .menu-container {
        position: absolute;
        top: 100%;
        right: 0;
        left: 0;
        z-index: 1060;
        display: none;
        background-color: var(--bs-white);
        border-top: 1px solid var(--bs-gray-200);

        &.focusing,
        &:focus-within {
          display: block;
        }

        a {
          &[data-depth="1"],
          &[data-depth="2"] {
            overflow-wrap: break-word;
            white-space: normal;
          }

          &[data-depth="1"] {
            font-weight: 600;
            color: var(--bs-body-color);

            &:hover {
              &,
              i {
                color: var(--bs-primary);
              }
            }

            &::after {
              display: none;
            }
          }
        }
      }
    }
  }

  .submenu {
    background-color: var(--bs-white);
    box-shadow: 0 10px 20px 0 rgba(var(--bs-black-rgb), 0.1);

    &__row {
      align-items: stretch;
    }

    &__left {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      padding-block: 1.5rem;
      border-right: 1px solid var(--bs-gray-200);

      .submenu__left-item {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        background-color: none;
        border-radius: var(--bs-border-radius);
        color: var(--bs-body-color);

        &:hover {
          background-color: var(--bs-primary);
          color: var(--bs-white);
        }

        &:active,
        &:focus {
          background-color: var(--bs-gray-100);
          color: var(--bs-primary);
        }

        &.active {
          background-color: var(--bs-gray-100);
          color: var(--bs-primary);

          &:active,
          &:focus {
            background-color: var(--bs-gray-100);
          }
        }

        &.has-child {
          &::after {
            @extend .material-icons;
            content: "\e315";
            margin: 0 0 0 auto;
          }
        }
      }
    }

    &__right {
      padding-block: 1.5rem;

      &-items {
        display: none;
        grid-template-columns: repeat(3, 1fr);
        border-radius: var(--bs-radius-rounded);
        column-gap: 1.25rem;
        row-gap: 2rem;

        &:first-child {
          display: grid;
        }

        &.active {
          display: grid;
        }

        &.not-active {
          display: none;
        }

        .menu-item {
          display: block;
          color: var(--bs-body-color);

          &:hover {
            color: var(--bs-primary);
          }

          &__group--child,
          &__group--nochild {
            .menu-item__group-main-item {
              margin-bottom: 0.5rem;
              font-size: 1.25rem;
              font-weight: 600;
            }
          }

          &__group--child {
            display: flex;
            flex-direction: column;

            .menu-item {
              display: flex;
              gap: 0.25rem;
              align-items: center;
            }
          }
        }

        @include media-breakpoint-up(xxl) {
          grid-template-columns: repeat(4, 1fr);
        }
      }
    }
  }

  // Mobile Menu
  .mobile-toggle {
    display: flex;
    align-items: center;

    .menu-toggle {
      background-color: transparent;

      .material-icons {
        font-size: 1.5rem;
      }
    }
  }

  &__offcanvas {
    padding: 0;
    
    .offcanvas-header {
      justify-content: space-between;
    }

    .main-menu__back-button {
      .btn {
        padding: 0.25rem 0.5rem;
      }
    }

    .btn-close {
      margin: 0;
      padding: 0.75rem;
    }

    .main-menu__mobile {
      .menu {
        padding: 0 1rem;

        &__list {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
        }

        &__link {
          &:active {
            color: var(--bs-primary);
          }
        }
      }

      .main-menu__title {
        margin-bottom: 0.75rem;
        padding: 0;
      }

      .main-menu__toggle-child {
        > span {
          line-height: 0;
        }
      }
    }
  }

  @include media-breakpoint-down(md) {
    padding-inline: 0;
  }
  @include media-breakpoint-up(xl) {
    order: 1;
  }
}
